###################################README#######################################
#
# The aim of these scripts is to allow the user to generate visuals of the 
# national accounts, using R. The data used in these examples is from:
# - Eurostat's Sector Accounts: 
#   http://ec.europa.eu/eurostat/statistics-explained/index.php/Sector_accounts
# - Irish Central Bank's Quarterly Financial Accounts: 
#   http://www.centralbank.ie/polstats/stats/qfaccounts/Pages/releases.aspx
#
# The scripts will generate examples of sankey diagrams, correlation heatmaps 
# and treemaps of the sectoral accounts. For all visual examples, Irish data 
# is used.
#
# The scripts will automatically generate folders to house files and to draw 
# data from. As the scripts may rely on data generated by another script, the 
# scripts should be used in order. All scripts and their functions are described
# below.
#
#
###############################################################################
# NOTE: R, RStudio and R PACKAGES - What you will need
################################################################################
# The following scripts are to be used in R, so you will need to download R and
# install it to you computer. RStudio is a shell for R that allows for greater 
# ease of use. Links to both programs are below.
#
# - R:        https://www.r-project.org/
# - Rstudio:  https://www.rstudio.com/
#
# As the package uses R, certain packages are required to successfully generate 
# the data. Enter the following code into your console to install the 
# required packages:
#   
# install.packages("SmarterPoland")
# install.packages("reshape2")
# install.packages("XLConnect")
# install.packages("RCurl")
# install.packages("ggplot2")
# install.packages("scales")
# install.packages("tables")
# install.packages("gdata")
# install.packages("sqldf")
# install.packages("xlsx")
# install.packages("treemap")  
#   
# Descriptions for all packages are linked below:
# 
# 
# Smarterpoland:    https://cran.r-project.org/package=SmarterPoland
# reshape2:         https://cran.r-project.org/package=reshape2
# XLConnect:        https://cran.r-project.org/package=XLConnect
# RCurl:            https://cran.r-project.org/package=RCurl
# ggplot2:          https://cran.r-project.org/package=ggplot2
# scales:           https://cran.r-project.org/package=scales
# tables:           https://cran.r-project.org/package=tables
# gdata:            https://cran.r-project.org/package=gdata
# sqldf:            https://cran.r-project.org/package=sqldf
# xlsx:             https://cran.r-project.org/package=xlsx
# treemap:          https://cran.r-project.org/package=treemap
#
#
################################################################################
# SCRIPT 1: SMARTERPOLAND_DATA_DOWNLOAD_AND_TRANSFORMATION
################################################################################
# This package utilises the SmarterPoland package in R to download data 
# directly from eurostat in a Raw format, and reshape2 to transform the data 
# into a more workable format. An additional set of code is included to edit 
# data for easier access later.
#
#
################################################################################
#SCRIPT #2: CENTRAL_BANK_DATA_DOWNLOAD
################################################################################
# The Central Bank of Ireland's data is the most complete when it comes to the
# Stock/Flow-of-funds aspect of the Irish national accounts. However, it is in
# a somewhat unwieldy excel workbook format.
# 
# This script uses R to download the data from the Central Bank's website,
# and XLConnect to convert the Excel Workbook into a R list. The script then 
# works the list into data frames, wheich are then saved for further use. The 
# script will need to be edited if the dates used are changed.
#
#
################################################################################
#SCRIPT #3: TFM_CONSTRUCTION_QUARTERLY
################################################################################
# This file uses the data we have gather in the previous two scripts to create
# a picture of the Irish economy's and financial & non-financial accounts, at a
# particular point in time, from 2002Q1 to 2013Q4. The script will require
# editing if more dates are to be added.
#
# The "picture" is actually a matrix of all items in the national accounts for 
# Ireland, presented in in a stock-flow consistent format and outputted to csv
# format for each point in time.
#
# A symbolic TFM is provided to give a visual sample.
#
#
################################################################################
#SCRIPTS #4 - #6: CORRELATION HEATMAPS
################################################################################
# These scripts use the data downloaded from the first two scripts to generate
# two time series for every individual data series in their respective datasets.
#
# Correlation values for these data are then, for every sector ccalcuated
# against their "counterpart". For example, correlation values are calculated
# for financial flows RECEIVED and financial flow PAID OUT. A heatmap visualises 
# these correlations: blue is positive; red is negative.
#
# The data series have unusual names, so there is a description file included to 
# help people decipher what they mean. For now, here's a short description:
#
#
# FOR NON-FINANCIAL TRANSACTIONS, WITH THERE WILL EXIST A DATA 
# SERIES IN THE FORMAT "<ITEM CODE>_<SECTOR>_<DIRECTION OF PAYMENT>".
# FOR EXAMPLE, B9_S12_PAID, WILL BE OUTFLOW OF HOUSEHOLDS IN THE NET 
# LENDING ITEM, WHICH IS THE SECTORAL BALANCE FOR HOUSEHOLDS
# FOR FINANCIAL TRANSACTIONS AND BLANCE SHEET DATA, THE FORMAT WILL BE
# "<ITEM CODE>_<SECTOR>_<ASSET/LIABILITY>".
#
# For further descriptions, read the "code desriptions.xls" file.
#
#
################################################################################
#SCRIPTS #7 - #8: ANNUAL TREEMAPS
################################################################################
# These scripts generate non-financial flows and asset/liability stocks for
# Ireland for all items, in EACH SECTOR, for the years 2002-2013. They are a
# good tool for comparing the relative sizes of flows/stocks of each sector,
# and the relative size of the national accounting items within each sector.
#
#
################################################################################
#SCRIPTS #9: SANKEY DIAGRAMS
################################################################################
# This last script generates a sankey diagram of a particular sector's flows at  
# a specific point in time. It uses a modified version of the sankey package.
# Sankey Diagrams are useful for breaking down flows which have multiple 
# categories.
#
# The sankey source code was developed by Nathan Yau, http://flowingdata.com
#
#





